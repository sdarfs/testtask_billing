# Task Management Service API

## Описание сервиса

Сервис предоставляет HTTP API для управления задачами.

## Технический стек

- **Язык**: Java
- **Фреймворк**: Spring Boot
- **Сборка**: Gradle
- **База данных**: PostgreSQL
- **ORM**: JPA (Hibernate)
- **Формат данных**: JSON
- **Система контроля версий**: Git

## Основные сущности

### Задача (Task)
- Наименование
- Описание
- Запланированная дата (не может быть меньше текущей)
- Тип (определяет приоритет)
- Теги (группировка задач)

### Тег (Tag)
- Уникальный заголовок
- Список связанных задач

### Тип задачи (Type)
- Название типа
- Уровень приоритета

## API Endpoints

### Управление задачами

| Метод  | Endpoint              | Описание                                           |
|--------|-----------------------|----------------------------------------------------|
| GET    | /api/tasks            | Получить все задачи                                |
| POST   | /api/tasks            | Изменение существующей задачи                      |
| POST   | /api/tasks            | Создание задачи                                    |
| GET    | /api/tasks/by-date    | Получение задач за дату (сортировка по приоритету) |
| GET    | /api/tasks?pagination | Получение задач с пагинацией                       |
| DELETE | /api/tasks/{id}       | Удаление задачи                                    |

### Управление тегами

| Метод  | Endpoint                  | Описание                                                         |
|--------|---------------------------|------------------------------------------------------------------|
| POST   | /api/tags                 | Создание нового тега                                             |
| POST   | /api/tags                 | Изменение существующего тега                                     |
| DELETE | /api/tags/tag/{id}        | Удаление тега по идентификатору (с задачами)                     |
| GET    | /api/tags/{id}            | Получение тега по ID с задачами                                  |
| GET    | /api/tags/with-tasks      | Получение всего списка тегов, у которых есть хотя бы одна задача |
| GET    | /api/tags/{id}/with-tasks | Получение тега с отсортированными по приоритету задачами         |


### Управление типами задач

| Метод | Endpoint       | Описание                              |
|-------|----------------|---------------------------------------|
| GET   | /api/types     | Получение списка типов с приоритетами |

### Вложения

| Метод | Endpoint               | Описание                          |
|-------|------------------------|----------------------------------|
| POST  | /api/tasks/{id}/upload | Загрузка файла-вложения для задачи |

## Запуск приложения

### Настройка
1. В файле `application.properties` необходимо прописать ссылку на базу данных, username, password:
```properties
spring.datasource.url=jdbc:postgresql://localhost:5432/taskdb
spring.datasource.username=user
spring.datasource.password=pass
spring.jpa.hibernate.ddl-auto=update
```

2. Запустите приложение:
```bash
gradle bootRun
```

### Docker
```bash
docker-compose up -d
```

## Документация API

Документация доступна по адресу:  
`http://localhost:8443/swagger-ui.html`

## Тестирование

Для тестирования API можно использовать Postman или аналогичные инструменты.  
Примеры запросов:

**Создание задачи:**
```json
POST /api/tasks
{
  "name": "Важная задача",
  "description": "Необходимо выполнить срочно",
  "taskDate": "2023-12-31",
  "tagId": 1,
  "typeId": 2
}
```

**Получение задач за дату:**
```
GET /api/tasks?date=2023-12-31
```

## Дополнительные возможности

- Валидация входящих данных
- Единый обработчик ошибок
- Кэширование типов(и тегов) задач
- Пагинация для метода получения списка задач
- Поддержка HTTPS
- Авторизация для операций добавления/изменения/удаления
- Документация кода(javadoc) и api(swagger)
- Конфигурация для запуска в docker-контейнере 


## Технические детали

### Валидация
- Дата задачи не может быть меньше текущей
- Тип задачи обязателен
- Тег обязателен при создании задачи

### Безопасность
- Все модифицирующие операции требуют авторизации
- Поддержка HTTPS

### Тестирование
- Покрытие unit-тестами (JUnit)
